{"version":3,"sources":["../../../src/app/pages/Home.js"],"names":["state","email","viewGrid","hosts","document","toggleView","update","requestUserEmail","test","fetch","json","fetchData","message","prompt","re","String","toLowerCase","app","getElementById","render","innerHTML","map","host","name","apps","slice","Item","join"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AACA;;;;;;;;;;;;;;;;;AAGI,sBAAc;AAAA;;AAAA;;AACV,SAAKA,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAE,IADE;AAETC,MAAAA,QAAQ,EAAE,IAFD;AAGTC,MAAAA,KAAK,EAAE;AAHE,KAAb;;AAMAC,IAAAA,QAAQ,CAACC,UAAT,GAAsB,YAAM;AACxB,MAAA,KAAI,CAACL,KAAL,CAAWE,QAAX,GAAsB,CAAC,KAAI,CAACF,KAAL,CAAWE,QAAlC;;AAEA,MAAA,KAAI,CAACI,MAAL;AACH,KAJD;;AAMA,SAAKC,gBAAL;AACH;;;;;;;;;;;;;AAGG,qBAAKP,KAAL,CAAWQ,IAAX,GAAkB,IAAlB;;;uBAGoCC,KAAK,CAAC,iCAAD,C;;;;qCAAqCC,I;;;AAA1E,qBAAKV,KAAL,CAAWG,K;;;;;;;AAEX,qBAAKQ,SAAL;;;iDAEGR,K;;;;;;;;;;;;;;;;;;qCAGMS,O,EAAS;AACtB;AACA,UAAMX,KAAK,GAAGY,MAAM,CAACD,OAAO,IAAI,wBAAZ,CAApB;AACA,UAAME,EAAE,GAAG,uJAAX;;AACA,UAAIb,KAAK,IAAIa,EAAE,CAACN,IAAH,CAAQO,MAAM,CAACd,KAAD,CAAN,CAAce,WAAd,EAAR,CAAb,EAAmD;AAC/C,aAAKhB,KAAL,CAAWC,KAAX,GAAmBA,KAAnB;AACH,OAFD,MAEO;AACH,aAAKM,gBAAL,CAAsB,4BAAtB;AACH;AACJ;;;;;;;;;;;;AAGSU,gBAAAA,G,GAAMb,QAAQ,CAACc,cAAT,CAAwB,MAAxB,C;;uBAEU,KAAKC,MAAL,E;;;AAAtBF,gBAAAA,GAAG,CAACG,S;;;;;;;;;;;;;;;;;;;;;;;;;;wJAOmB,KAAKpB,KAAL,CAAWC,K,6HAEiB,KAAKD,KAAL,CAAWE,QAAX,GAAsB,SAAtB,GAAkC,E,sFACjD,KAAKF,KAAL,CAAWE,QAAX,GAAsB,yBAAtB,GAAkD,c,+FAGpE,KAAKF,KAAL,CAAWE,QAAX,GAAsB,WAAtB,GAAoC,oB,kDAC5C,KAAKF,KAAL,CAAWG,KAAX,CAAiBkB,GAAjB,CAAqB,UAACC,IAAD;AAAA,oKAGKA,IAAI,CAACC,IAHV,8EAKTD,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,CAAhB,EAAmB,CAAnB,EAAsBJ,GAAtB,CAA0B,UAACJ,GAAD;AAAA,2BAAS,IAAIS,aAAJ,CAAST,GAAT,EAAcE,MAAd,EAAT;AAAA,mBAA1B,EAA2DQ,IAA3D,CAAgE,EAAhE,CALS;AAAA,iBAArB,EASHA,IATG,CASE,EATF,C","sourcesContent":["/* eslint-disable class-methods-use-this */\nimport Item from '../components/item';\n\nexport default class {\n    constructor() {\n        this.state = {\n            email: null,\n            viewGrid: true,\n            hosts: []\n        };\n\n        document.toggleView = () => {\n            this.state.viewGrid = !this.state.viewGrid;\n\n            this.update();\n        };\n\n        this.requestUserEmail();\n    }\n\n    async fetchData() {\n        this.state.test = true;\n        let hosts;\n        try {\n            this.state.hosts = await (await fetch('http://localhost:8100/api/hosts')).json();\n        } catch (error) {\n            this.fetchData();\n        }\n        return hosts;\n    }\n\n    requestUserEmail(message) {\n        // eslint-disable-next-line no-alert\n        const email = prompt(message || 'Enter your user email:');\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        if (email && re.test(String(email).toLowerCase())) {\n            this.state.email = email;\n        } else {\n            this.requestUserEmail('Please enter a valid email');\n        }\n    }\n\n    async update() {\n        const app = document.getElementById('root');\n\n        app.innerHTML = await this.render();\n    }\n\n    async render() {\n        return `\n            <header>\n                <h1>Apps by Host</h1>\n                <h2>for user ${this.state.email}</h2>\n                <div class=\"form-group\">\n                    <input type=\"checkbox\" id=\"checkbox\" ${this.state.viewGrid ? 'checked' : ''} onChange=\"toggleView()\">\n                    <label for=\"checkbox\">${this.state.viewGrid ? 'Show as an awesome grid' : 'Show as list'}</label>\n                </div>\n            </header>\n            <div class=\"${this.state.viewGrid ? 'container' : 'container listview'}\">                \n                ${this.state.hosts.map((host) => `\n                <div class=\"card\">\n                    <div class=\"content\">\n                        <h3 class=\"title\">${host.name}</h3>\n                        <ul>\n                            ${host.apps.slice(0, 5).map((app) => new Item(app).render()).join('')}\n                        </ul>\n                    </div>\n                </div>\n            `).join('')}\n            </div>\n        `;\n    }\n}\n"],"file":"Home.js"}